(()=>{var e={};e.id=76,e.ids=[76],e.modules={3524:e=>{"use strict";e.exports=require("@prisma/client")},7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},3837:e=>{"use strict";e.exports=require("util")},2516:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c}),r(9507),r(1506),r(5866);var s=r(3191),n=r(8716),i=r(7922),a=r.n(i),o=r(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c=["",{children:["booking",{children:["confirmation",{children:["[sessionId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,9507)),"/Users/hemantd/DL/dance-platform/app/booking/confirmation/[sessionId]/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,1506)),"/Users/hemantd/DL/dance-platform/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/hemantd/DL/dance-platform/app/booking/confirmation/[sessionId]/page.tsx"],u="/booking/confirmation/[sessionId]/page",m={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/booking/confirmation/[sessionId]/page",pathname:"/booking/confirmation/[sessionId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},9136:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},7914:()=>{},5303:()=>{},9507:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(9510),n=r(1085),i=r(1247),a=r(3474);async function o(e){try{let t=await i.Ag.checkout.sessions.retrieve(e,{expand:["payment_intent","line_items"]});if(!t)return null;let r=await a.Z.booking.findFirst({where:{stripeSessionId:e},include:{user:!0,class:{include:{venue:!0,classInstructors:{include:{instructor:{include:{user:!0}}}}}},event:{include:{venue:!0,organizer:!0}},transactions:{where:{provider:"STRIPE"},orderBy:{createdAt:"desc"},take:1}}});return{session:t,booking:r}}catch(e){return console.error("Error fetching booking details:",e),null}}async function l({params:e}){let{sessionId:t}=e,r=await o(t);r&&r.booking||(0,n.notFound)();let{session:i,booking:a}=r;a.transactions[0];let l=a.class||a.event,c=!!a.class;return s.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,s.jsxs)("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-4",children:s.jsx("svg",{className:"h-8 w-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Booking Confirmed!"}),s.jsx("p",{className:"text-lg text-gray-600",children:"Thank you for your payment. Your booking has been confirmed."})]}),(0,s.jsxs)("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden",children:[s.jsx("div",{className:"px-6 py-8 border-b border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:l?.title}),s.jsx("p",{className:"text-gray-600 mb-4",children:c?"Dance Class":"Dance Event"}),l?.venue&&(0,s.jsxs)("div",{className:"flex items-center text-gray-600 mb-2",children:[(0,s.jsxs)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,s.jsxs)("span",{children:[l.venue.name,", ",l.venue.city,", ",l.venue.state]})]}),c&&a.class?.classInstructors?.[0]?.instructor?.user&&(0,s.jsxs)("div",{className:"flex items-center text-gray-600 mb-2",children:[s.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),(0,s.jsxs)("span",{children:["Instructor: ",a.class.classInstructors[0].instructor.user.fullName]})]}),!c&&a.event&&s.jsx("div",{className:"space-y-2",children:(0,s.jsxs)("div",{className:"flex items-center text-gray-600",children:[s.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,s.jsxs)("span",{children:[new Date(a.event.startDate).toLocaleDateString()," at ",a.event.startTime]})]})})]}),l?.imageUrl&&s.jsx("div",{className:"ml-6",children:s.jsx("img",{src:l.imageUrl,alt:l.title,className:"w-24 h-24 object-cover rounded-lg"})})]})}),(0,s.jsxs)("div",{className:"px-6 py-6 bg-gray-50",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment Details"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx("div",{children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Confirmation Code:"}),s.jsx("span",{className:"font-semibold",children:a.confirmationCode})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Payment Status:"}),s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:a.paymentStatus})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Payment Method:"}),s.jsx("span",{className:"capitalize",children:a.paymentMethod||"Card"})]})]})}),s.jsx("div",{children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),(0,s.jsxs)("span",{children:["$",Number(a.totalAmount).toFixed(2)]})]}),Number(a.discountAmount)>0&&(0,s.jsxs)("div",{className:"flex justify-between text-green-600",children:[s.jsx("span",{children:"Discount:"}),(0,s.jsxs)("span",{children:["-$",Number(a.discountAmount).toFixed(2)]})]}),Number(a.taxAmount)>0&&(0,s.jsxs)("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Tax:"}),(0,s.jsxs)("span",{children:["$",Number(a.taxAmount).toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex justify-between text-lg font-semibold border-t border-gray-200 pt-2",children:[s.jsx("span",{children:"Total Paid:"}),(0,s.jsxs)("span",{children:["$",Number(a.amountPaid).toFixed(2)]})]})]})})]})]}),(0,s.jsxs)("div",{className:"px-6 py-6 border-t border-gray-200",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Customer Information"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Name:"}),s.jsx("span",{children:a.user.fullName})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Email:"}),s.jsx("span",{children:a.user.email})]}),a.user.phone&&(0,s.jsxs)("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Phone:"}),s.jsx("span",{children:a.user.phone})]})]})]}),(0,s.jsxs)("div",{className:"px-6 py-6 bg-blue-50",children:[s.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"What's Next?"}),(0,s.jsxs)("div",{className:"space-y-3 text-blue-800",children:[(0,s.jsxs)("div",{className:"flex items-start",children:[s.jsx("svg",{className:"w-5 h-5 mr-2 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),s.jsx("span",{children:"You'll receive a confirmation email with all the details"})]}),(0,s.jsxs)("div",{className:"flex items-start",children:[s.jsx("svg",{className:"w-5 h-5 mr-2 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),s.jsx("span",{children:c?"Show up 10 minutes early for your first class":"Arrive 15 minutes before the event starts"})]}),(0,s.jsxs)("div",{className:"flex items-start",children:[s.jsx("svg",{className:"w-5 h-5 mr-2 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),s.jsx("span",{children:"Bring comfortable clothes and water"})]})]})]}),(0,s.jsxs)("div",{className:"px-6 py-6 border-t border-gray-200 flex flex-col sm:flex-row gap-4",children:[(0,s.jsxs)("button",{onClick:()=>window.print(),className:"flex-1 bg-gray-100 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-200 transition-colors",children:[s.jsx("svg",{className:"w-4 h-4 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Print Receipt"]}),s.jsx("a",{href:"/",className:"flex-1 bg-purple-600 text-white text-center px-4 py-2 rounded-md hover:bg-purple-700 transition-colors",children:"Back to Home"})]})]})]})})}},1506:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o,metadata:()=>a});var s=r(9510),n=r(5384),i=r.n(n);r(7272);let a={title:"Dance Platform - Modern Dance Studio Management",description:"Professional dance studio platform with booking, payments, and management"};function o({children:e}){return s.jsx("html",{lang:"en",children:s.jsx("body",{className:i().className,children:s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50",children:e})})})}},3474:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(3524);let n=global.prisma||new s.PrismaClient},1247:(e,t,r)=>{"use strict";r.d(t,{Ag:()=>n,bZ:()=>i,oV:()=>a});var s=r(1059);r(468);let n=new s.Z(process.env.STRIPE_SECRET_KEY,{apiVersion:"2024-06-20",typescript:!0}),i=(e,t="usd")=>Math.round(100*e),a=()=>{let e=[];return process.env.STRIPE_SECRET_KEY||e.push("STRIPE_SECRET_KEY is not set"),{isValid:0===e.length,errors:e}}},1085:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return a},RedirectType:function(){return s.RedirectType},notFound:function(){return n.notFound},permanentRedirect:function(){return s.permanentRedirect},redirect:function(){return s.redirect}});let s=r(3953),n=r(6399);class i extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class a extends URLSearchParams{append(){throw new i}delete(){throw new i}set(){throw new i}sort(){throw new i}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6399:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{isNotFoundError:function(){return n},notFound:function(){return s}});let r="NEXT_NOT_FOUND";function s(){let e=Error(r);throw e.digest=r,e}function n(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8586:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedirectStatusCode",{enumerable:!0,get:function(){return r}}),function(e){e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect"}(r||(r={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3953:(e,t,r)=>{"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{RedirectType:function(){return s},getRedirectError:function(){return l},getRedirectStatusCodeFromError:function(){return p},getRedirectTypeFromError:function(){return x},getURLFromRedirectError:function(){return m},isRedirectError:function(){return u},permanentRedirect:function(){return d},redirect:function(){return c}});let n=r(4580),i=r(2934),a=r(8586),o="NEXT_REDIRECT";function l(e,t,r){void 0===r&&(r=a.RedirectStatusCode.TemporaryRedirect);let s=Error(o);s.digest=o+";"+t+";"+e+";"+r+";";let i=n.requestAsyncStorage.getStore();return i&&(s.mutableCookies=i.mutableCookies),s}function c(e,t){void 0===t&&(t="replace");let r=i.actionAsyncStorage.getStore();throw l(e,t,(null==r?void 0:r.isAction)?a.RedirectStatusCode.SeeOther:a.RedirectStatusCode.TemporaryRedirect)}function d(e,t){void 0===t&&(t="replace");let r=i.actionAsyncStorage.getStore();throw l(e,t,(null==r?void 0:r.isAction)?a.RedirectStatusCode.SeeOther:a.RedirectStatusCode.PermanentRedirect)}function u(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r,s,n]=e.digest.split(";",4),i=Number(n);return t===o&&("replace"===r||"push"===r)&&"string"==typeof s&&!isNaN(i)&&i in a.RedirectStatusCode}function m(e){return u(e)?e.digest.split(";",3)[2]:null}function x(e){if(!u(e))throw Error("Not a redirect error");return e.digest.split(";",2)[1]}function p(e){if(!u(e))throw Error("Not a redirect error");return Number(e.digest.split(";",4)[3])}(function(e){e.push="push",e.replace="replace"})(s||(s={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7272:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,892,50],()=>r(2516));module.exports=s})();