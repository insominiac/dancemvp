(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[169],{7026:function(e,s,l){Promise.resolve().then(l.bind(l,5822))},5822:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return c}});var t=l(7437),a=l(2265),n=l(1169),r=l(7138);function c(e){let{params:s}=e,l=(0,n.useRouter)(),[c,i]=(0,a.useState)(null),[d,o]=(0,a.useState)(!0),[x,m]=(0,a.useState)(!1),[u,p]=(0,a.useState)(1),[h,g]=(0,a.useState)({name:"",email:"",phone:"",emergencyContact:"",emergencyPhone:"",experience:"beginner",notes:"",agreeToTerms:!1});(0,a.useEffect)(()=>{j()},[s.id]);let j=async()=>{o(!0);try{let e=await fetch("/api/public/classes/".concat(s.id));if(e.ok){let s=await e.json();i(s.class)}}catch(e){console.error("Error fetching class details:",e)}finally{o(!1)}},f=async e=>{if(e.preventDefault(),1===u){p(2);return}try{let e=await fetch("/api/public/bookings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({classId:s.id,...h})});if(e.ok){let s=await e.json();l.push("/booking/confirmation/".concat(s.bookingId))}else alert("Booking failed. Please try again.")}catch(e){alert("An error occurred. Please try again.")}};if(d)return(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-12",children:(0,t.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})})});if(!c)return(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-12",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Class not found"}),(0,t.jsx)(r.default,{href:"/classes",className:"text-purple-600 hover:text-purple-700",children:"← Back to classes"})]})});let b=c.maxStudents-c.currentStudents,y=b>0&&"ACTIVE"===c.status;return(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsx)(r.default,{href:"/classes",className:"text-purple-600 hover:text-purple-700",children:"← Back to classes"})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{className:"lg:col-span-2",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:c.title}),(0,t.jsx)("span",{className:"px-3 py-1 rounded-full text-sm ".concat("Beginner"===c.level?"bg-green-100 text-green-800":"Intermediate"===c.level?"bg-yellow-100 text-yellow-800":"Advanced"===c.level?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"),children:c.level})]}),(0,t.jsx)("p",{className:"text-gray-600 text-lg",children:c.description})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-6 mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Schedule"}),(0,t.jsx)("p",{className:"text-gray-600",children:c.schedule})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Duration"}),(0,t.jsxs)("p",{className:"text-gray-600",children:[c.duration," minutes per session"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Start Date"}),(0,t.jsx)("p",{className:"text-gray-600",children:new Date(c.startDate).toLocaleDateString()})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"End Date"}),(0,t.jsx)("p",{className:"text-gray-600",children:new Date(c.endDate).toLocaleDateString()})]})]}),c.venue&&(0,t.jsxs)("div",{className:"border-t pt-6",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Location"}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:c.venue.name}),(0,t.jsx)("p",{className:"text-gray-600",children:c.venue.address}),(0,t.jsxs)("p",{className:"text-gray-600",children:[c.venue.city,c.venue.state&&", ".concat(c.venue.state)]})]})]}),c.classInstructors&&c.classInstructors.length>0&&(0,t.jsxs)("div",{className:"border-t pt-6 mt-6",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Instructor(s)"}),(0,t.jsx)("div",{className:"space-y-3",children:c.classInstructors.map(e=>{var s;return(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-purple-600 font-semibold",children:(null===(s=e.instructor.user.name)||void 0===s?void 0:s.charAt(0))||"?"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:e.instructor.user.name}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[e.instructor.experience," years experience"]})]})]},e.instructor.id)})})]}),c.classStyles&&c.classStyles.length>0&&(0,t.jsxs)("div",{className:"border-t pt-6 mt-6",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Dance Styles"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:c.classStyles.map(e=>(0,t.jsx)("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm",children:e.style.name},e.style.id))})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 mt-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"What to Expect"}),(0,t.jsxs)("ul",{className:"space-y-3 text-gray-600",children:[(0,t.jsxs)("li",{className:"flex items-start",children:[(0,t.jsx)("span",{className:"text-purple-600 mr-2",children:"✓"}),"Professional instruction from experienced dancers"]}),(0,t.jsxs)("li",{className:"flex items-start",children:[(0,t.jsx)("span",{className:"text-purple-600 mr-2",children:"✓"}),"Small class sizes for personalized attention"]}),(0,t.jsxs)("li",{className:"flex items-start",children:[(0,t.jsx)("span",{className:"text-purple-600 mr-2",children:"✓"}),"Progressive curriculum designed for your level"]}),(0,t.jsxs)("li",{className:"flex items-start",children:[(0,t.jsx)("span",{className:"text-purple-600 mr-2",children:"✓"}),"Supportive and encouraging environment"]}),(0,t.jsxs)("li",{className:"flex items-start",children:[(0,t.jsx)("span",{className:"text-purple-600 mr-2",children:"✓"}),"All necessary equipment provided"]})]})]})]}),(0,t.jsx)("div",{className:"lg:col-span-1",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 sticky top-24",children:[(0,t.jsxs)("div",{className:"text-center mb-6",children:[(0,t.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:["$",c.price]}),(0,t.jsx)("p",{className:"text-gray-600",children:"per class"})]}),(0,t.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Available spots:"}),(0,t.jsx)("span",{className:"font-semibold ".concat(b>5?"text-green-600":b>0?"text-yellow-600":"text-red-600"),children:b>0?"".concat(b," left"):"Class full"})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Class size:"}),(0,t.jsxs)("span",{className:"font-semibold",children:[c.maxStudents," students max"]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Currently enrolled:"}),(0,t.jsxs)("span",{className:"font-semibold",children:[c.currentStudents," students"]})]})]}),(0,t.jsx)("button",{onClick:()=>m(!0),disabled:!y,className:"w-full py-3 rounded-lg font-semibold transition ".concat(y?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:y?"Book This Class":"Class Unavailable"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 text-center mt-4",children:"Free cancellation up to 24 hours before class"})]})})]}),x&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg p-8 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsxs)("h2",{className:"text-2xl font-bold",children:["Book Class: ",c.title]}),(0,t.jsx)("button",{onClick:()=>{m(!1),p(1)},className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-center mb-8",children:[(0,t.jsxs)("div",{className:"flex items-center ".concat(u>=1?"text-purple-600":"text-gray-400"),children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center ".concat(u>=1?"bg-purple-600 text-white":"bg-gray-300"),children:"1"}),(0,t.jsx)("span",{className:"ml-2",children:"Your Information"})]}),(0,t.jsx)("div",{className:"w-16 h-1 bg-gray-300 mx-4",children:(0,t.jsx)("div",{className:"h-full ".concat(u>=2?"bg-purple-600":""),style:{width:u>=2?"100%":"0%"}})}),(0,t.jsxs)("div",{className:"flex items-center ".concat(u>=2?"text-purple-600":"text-gray-400"),children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center ".concat(u>=2?"bg-purple-600 text-white":"bg-gray-300"),children:"2"}),(0,t.jsx)("span",{className:"ml-2",children:"Confirm & Pay"})]})]}),(0,t.jsx)("form",{onSubmit:f,children:1===u?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),(0,t.jsx)("input",{type:"text",required:!0,value:h.name,onChange:e=>g({...h,name:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),(0,t.jsx)("input",{type:"email",required:!0,value:h.email,onChange:e=>g({...h,email:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),(0,t.jsx)("input",{type:"tel",required:!0,value:h.phone,onChange:e=>g({...h,phone:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Emergency Contact"}),(0,t.jsx)("input",{type:"text",value:h.emergencyContact,onChange:e=>g({...h,emergencyContact:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Emergency Phone"}),(0,t.jsx)("input",{type:"tel",value:h.emergencyPhone,onChange:e=>g({...h,emergencyPhone:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dance Experience"}),(0,t.jsxs)("select",{value:h.experience,onChange:e=>g({...h,experience:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,t.jsx)("option",{value:"beginner",children:"Complete Beginner"}),(0,t.jsx)("option",{value:"some",children:"Some Experience"}),(0,t.jsx)("option",{value:"intermediate",children:"Intermediate"}),(0,t.jsx)("option",{value:"advanced",children:"Advanced"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Special Requirements or Notes"}),(0,t.jsx)("textarea",{value:h.notes,onChange:e=>g({...h,notes:e.target.value}),rows:3,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Any injuries, medical conditions, or special needs we should know about?"})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,t.jsx)("button",{type:"button",onClick:()=>m(!1),className:"px-6 py-2 border rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Continue to Payment"})]})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"font-semibold mb-3",children:"Booking Summary"}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Class:"}),(0,t.jsx)("span",{className:"font-medium",children:c.title})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Schedule:"}),(0,t.jsx)("span",{className:"font-medium",children:c.schedule})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Duration:"}),(0,t.jsxs)("span",{className:"font-medium",children:[new Date(c.startDate).toLocaleDateString()," - ",new Date(c.endDate).toLocaleDateString()]})]}),(0,t.jsxs)("div",{className:"flex justify-between pt-2 border-t",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Total:"}),(0,t.jsxs)("span",{className:"font-semibold text-lg",children:["$",c.price]})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold mb-3",children:"Payment Method"}),(0,t.jsx)("div",{className:"border rounded-lg p-4 bg-blue-50 text-blue-700",children:(0,t.jsx)("p",{className:"text-sm",children:"\uD83D\uDCB3 Payment processing will be integrated here. For now, this is a demo booking flow."})})]}),(0,t.jsx)("div",{children:(0,t.jsxs)("label",{className:"flex items-start",children:[(0,t.jsx)("input",{type:"checkbox",required:!0,checked:h.agreeToTerms,onChange:e=>g({...h,agreeToTerms:e.target.checked}),className:"mt-1 mr-2"}),(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"I agree to the terms and conditions, cancellation policy, and acknowledge that I am physically able to participate in this class."})]})}),(0,t.jsxs)("div",{className:"flex justify-between gap-3 pt-4",children:[(0,t.jsx)("button",{type:"button",onClick:()=>p(1),className:"px-6 py-2 border rounded-lg hover:bg-gray-50",children:"← Back"}),(0,t.jsx)("button",{type:"submit",disabled:!h.agreeToTerms,className:"px-6 py-2 rounded-lg ".concat(h.agreeToTerms?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:"Complete Booking"})]})]})})]})})]})}},7138:function(e,s,l){"use strict";l.d(s,{default:function(){return a.a}});var t=l(231),a=l.n(t)}},function(e){e.O(0,[231,971,23,744],function(){return e(e.s=7026)}),_N_E=e.O()}]);